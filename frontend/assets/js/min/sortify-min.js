(function(a){a.fn.sortify=function(b){var k=this;b=a.extend({cb:null,cb_data:null,cmp:function(d,i){return d>i?1:d<i?-1:0},typeCoercion:true,caseSensitive:true,clickerSelector:false,defaultSort:-1},b);return this.each(function(){var d=-1,i=d,j=0,m=j,n=a("tr:first",this),l=a("tr",this).slice(1),o=function(c){var g;c=c.replace(/^\s+|\s+$/g,"");if(g=c.match(/^(?:[^\w]\s*)?([+-]?(\d+(\.\d+)?|\.\d+)([eE][+-]?\d+)?)/))return Number(g[1]);return c},p=function(c,g,h){var e=":nth-child("+(h+1)+")",f=a(e,c).text();
e=a(e,g).text();if(!b.caseSensitive){f=f.toLowerCase();e=e.toLowerCase()}if(b.typeCoercion){f=o(f);e=o(e)}f=b.cmp.call(h,f,e);if(!f)if(i!==h)return m*p(c,g,i);return j*f};n.children().each(function(c){var g;g=b.clickerSelector===false?a(this):a(b.clickerSelector,this);g.click(function(){var h;m=j;i=d;j=c===d?j*-1:1;d=c;a(".sorted",k).removeClass("sorted");a(".sorted_up",k).removeClass("sorted_up");a(".sorted_down",k).removeClass("sorted_down");l.detach();l.sort(function(e,f){return p(e,f,d)});h=j==
1?"sorted_up":"sorted_down";a(n.children().get(d)).addClass("sorted").addClass(h);l.each(function(){a(":nth-child("+(d+1)+")",this).addClass("sorted").addClass(h);k.append(this);b.cb!==null&&b.cb.call(k,b.cb_data)})});c==b.defaultSort&&g.trigger("click")})})}})(jQuery);
